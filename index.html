<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0' name='viewport' />
	<title>Drive Video Player</title>
	<link rel="shortcut icon" href="https://www.youtube.com/s/desktop/ca23eea5/img/favicon_144x144.png"
		type="image/x-icon" />
</head>

<body>
	<style>
		body {
			padding: 0;
			margin: 0;
		}

		video {
			width: 100%;
			height: 100%;
			position: absolute;
		}

		.embed {
			position: absolute;
			background: none;
			top: 2px;
			z-index: 999;
			color: aqua;
			font-family: sans-serif;
			font-size: 18px;
			border: 0;
			font-weight: 600;
			right: 10px;
		}
	</style>
	<script>
		/*<![CDATA[*/
		var apikey = "AIzaSyCH4I2OxQnocrzdiZLeLOSI6GOnkuUR-yI"; //Your Drive Api Key
		var eid = "";
		var video = "";
		var embed = "";

		// Fungsi untuk mengambil gambar thumbnail dari video menggunakan Google Drive API
		function getVideoThumbnail(videoId, apiKey) {
			var requestUrl = "https://www.googleapis.com/drive/v3/files/" + videoId + "?fields=thumbnailLink&key=" + apiKey;

			// Melakukan permintaan HTTP untuk mendapatkan thumbnailLink dari Google Drive API
			fetch(requestUrl)
				.then(response => response.json())
				.then(data => {
					// Mengambil URL gambar thumbnail dari respons API
					var thumbnailUrl = data.thumbnailLink;

					// Menyimpan URL gambar thumbnail ke dalam tag meta
					document.querySelector('meta[property="og:image"]').setAttribute('content', thumbnailUrl);
				})
				.catch(error => console.error('Error:', error));
		}

		if (!getParameterByName('id') || getParameterByName('ib')) {
			var eid = prompt('URL DRIVE DISINI YA :- ');
			embed = `
		<iframe allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' allowfullscreen='true' frameborder='0' height='100%' scrolling='no' src='${location.href}?id=${eid}' width='100%'></iframe>
			`;
			prompt('Success, please take URL embed :- ', embed);
			window.location.href = window.location.href + '?id=' + eid;
		}
		video = getParameterByName('id');
		if (getParameterByName('ib')) {
			video = btoa(getParameterByName('ib'));
		}
		var vidurl = "https://www.googleapis.com/drive/v3/files/" + video + "?alt=media&key=" + apikey;
		console.log(vidurl)
		document.write("<video controls crossorigin playsinline class='js-player' data-poster='' id='player' src='" + vidurl +
			"'></video>");

		// Panggil fungsi untuk mendapatkan thumbnail saat halaman dimuat
		window.onload = function () {
			// Ganti 'video' dengan ID video yang ingin Anda dapatkan thumbnail-nya
			// Ganti 'apikey' dengan API key Anda
			getVideoThumbnail(video, apikey);
		};
		/*]]>*/
	</script>
	<script src='path/to/plyr.js'></script>
	<script>
		/*<![CDATA[*/
		const player = new Plyr('#player');
		/*]]>*/
	</script>

</body>

</html>
